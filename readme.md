# MusicBee Quick Tag Browser 插件使用指南

## 📋 插件简介

**Quick Tag Browser** 是一个强大的 MusicBee 插件，帮助您快速浏览和应用音乐库中已存在的标签值。通过直观的列式界面，您可以高效地为歌曲批量添加标签，极大提升音乐库管理效率。

**版本**: v1.4  
**适用**: MusicBee 3.0+

---

## ✨ 核心功能

### 1. 智能字段扫描
- 自动扫描整个音乐库，识别所有包含数据的标签字段
- 显示字段的真实名称（如"情感表现方式"、"音乐特质"等）
- 统计每个字段的不同值数量

### 2. 列式并排显示
- 所有选中的字段在一个界面中并排显示
- 每列显示一个字段的所有可用值
- 值按字母顺序排序，便于查找

### 3. 实时选曲跟踪
- 窗口保持打开状态，无需反复开关
- 自动检测 MusicBee 中的选曲变化（每 0.5 秒）
- 顶部实时显示当前选中的歌曲信息

### 4. 一键快速应用
- 双击任意标签值即可立即应用
- 无需确认对话框，操作流畅
- 应用后显示绿色成功提示 2 秒

---

## 🚀 安装步骤

### 1. 编译插件

在项目目录中运行：

```batch
.\build.bat
```

编译成功后会生成 `mb_QuickTag.dll` 文件。

### 2. 安装到 MusicBee

1. 找到 MusicBee 的插件文件夹：
   - 通常位于：`C:\Program Files (x86)\MusicBee\Plugins`
   - 或在 MusicBee 中：`编辑` → `首选项` → `插件` → `打开插件文件夹`

2. 将 `mb_QuickTag.dll` 复制到 Plugins 文件夹

3. 重启 MusicBee

### 3. 验证安装

1. 打开 MusicBee
2. 进入 `编辑` → `首选项` → `插件`
3. 在插件列表中找到 **"Quick Tag Browser v1.4"**
4. 确保插件已启用（勾选）

---

## ⚙️ 配置插件

### 首次配置

1. 在 MusicBee 中：`编辑` → `首选项` → `插件`
2. 选中 **"Quick Tag Browser"**
3. 点击右侧的 **"配置"** 按钮
4. 等待扫描完成（会显示"正在扫描音乐库..."）

### 选择要显示的字段

配置窗口会显示所有包含数据的字段，例如：

```
☑ Grouping (15 个不同值)
☑ Genre (8 个不同值)
☑ Mood (12 个不同值)
☑ Custom1 (5 个不同值)
☑ Keywords (20 个不同值)
```

- **勾选**您希望在 Tag Browser 中显示的字段
- 使用 **"全选"** 或 **"全不选"** 按钮快速操作
- 点击 **"确定"** 保存设置

### 修改配置

随时可以重新打开配置窗口调整显示的字段。设置会保存在：
```
<MusicBee数据目录>\QuickTagBrowser_Fields.txt
```

---

## 📖 使用教程

### 基本工作流程

#### 1. 打开 Tag Browser

在 MusicBee 菜单栏：`工具` → `Quick Tag Browser`

窗口会打开并保持在前台，显示类似这样的界面：

```
┌────────────────────────────────────────────────────────────┐
│ 当前选中: Artist Name - Song Title                          │
├──────────────┬──────────────┬──────────────┬──────────────┤
│   Grouping   │    Genre     │     Mood     │   Keywords   │
│              │              │              │              │
│ Acoustic     │  Rock        │  Energetic   │  Favorite    │
│ Live         │  Pop         │  Relaxing    │  Workout     │
│ Remix        │  Jazz        │  Happy       │  Study       │
│ ...          │  ...         │  ...         │  ...         │
│              │              │              │              │
└──────────────┴──────────────┴──────────────┴──────────────┘
│                          关闭                               │
└────────────────────────────────────────────────────────────┘
```

#### 2. 选择歌曲

在 MusicBee 主窗口中选择一首或多首歌曲：
- **单选**：点击一首歌
- **多选**：按住 `Ctrl` 点击多首歌
- **范围选择**：按住 `Shift` 点击首尾歌曲

Tag Browser 窗口顶部会自动更新显示：
- 单首歌曲：`当前选中: 艺术家 - 歌曲名`
- 多首歌曲：`已选中 5 个文件`
- 未选择：`未选择任何文件`（红色）

#### 3. 应用标签

在 Tag Browser 窗口中：
1. 找到想要应用的标签值
2. **双击**该值
3. 标签立即应用到选中的歌曲
4. 顶部显示绿色成功提示：`✓ 已应用 'Energetic' 到 Mood 字段 (1 个文件)`

#### 4. 继续处理下一首

- Tag Browser 窗口保持打开
- 在 MusicBee 中选择下一首歌曲
- 窗口自动更新显示新选中的歌曲
- 重复步骤 3 应用标签

---

## 💡 高效使用技巧

### 技巧 1: 批量打标签工作流

**场景**：为一批新导入的歌曲添加 Mood 标签

1. 打开 Tag Browser（保持打开）
2. 在 MusicBee 中按流派或文件夹筛选歌曲
3. 逐首选择歌曲，双击对应的标签值
4. 使用键盘快捷键快速切换歌曲：
   - `↓` 下一首
   - `↑` 上一首
5. Tag Browser 自动跟踪选曲，无需切换窗口

### 技巧 2: 多首歌曲批量应用

**场景**：为一张专辑的所有歌曲添加相同的 Grouping 标签

1. 在 MusicBee 中选中整张专辑（`Ctrl+A` 或 `Shift+点击`）
2. Tag Browser 显示：`已选中 12 个文件`
3. 双击 Grouping 列中的某个值
4. 该标签立即应用到所有 12 首歌曲

### 技巧 3: 窗口布局优化

- **调整窗口大小**：拖动窗口边缘，最小 800×400
- **并排显示**：将 Tag Browser 窗口放在屏幕一侧，MusicBee 放在另一侧
- **多显示器**：将 Tag Browser 放在副显示器上

### 技巧 4: 快速查找标签值

- 每列的值按字母顺序排序
- 使用鼠标滚轮快速浏览
- 列数较多时，窗口会自动显示横向滚动条

---

## 🎯 实际应用场景

### 场景 1: 音乐情绪分类

您的音乐库中已经为一些歌曲标记了 Mood 标签：
- Energetic
- Relaxing
- Happy
- Melancholic

现在要为新歌曲添加相同的分类：
1. 打开 Tag Browser
2. 播放新歌曲，感受情绪
3. 双击对应的 Mood 标签
4. 下一首

### 场景 2: 播放列表管理

根据 Keywords 字段创建播放列表：
- Workout
- Study
- Party
- Sleep

1. 为歌曲添加 Keywords 标签
2. 在 MusicBee 中按 Keywords 字段筛选
3. 创建自动播放列表

### 场景 3: 音乐分组管理

使用 Grouping 字段为音乐库添加详细分类：
- Acoustic
- Live Performance
- Remix
- Cover Version
- ...

Tag Browser 显示所有已存在的分组，确保标签一致性。

---

## 🔧 技术细节

### 支持的字段类型

插件支持以下 MusicBee 字段类型：
- **标准字段**：Genre, Mood, Grouping, Publisher, Keywords 等
- **自定义字段**：Custom1 - Custom16
- **虚拟字段**：Virtual1 - Virtual25

### 多值标签处理

插件自动处理分隔符：
- 分号分隔：`标签1;标签2;标签3`
- Null 字符分隔：`标签1\0标签2\0标签3`

每个值会单独显示在列表中。

### 性能优化

- **初次扫描**：打开窗口时扫描整个音乐库（可能需要几秒）
- **选曲跟踪**：每 0.5 秒轻量级检查，不影响性能
- **标签应用**：直接写入文件标签，立即生效

---

## ❓ 常见问题

### Q1: 为什么某些字段没有显示？

**A**: 只有在音乐库中**实际包含数据**的字段才会显示。如果某个字段一首歌都没有使用过，它不会出现在配置列表中。

**解决方法**：
1. 在 MusicBee 中手动为至少一首歌添加该字段的值
2. 重新打开配置窗口，该字段就会出现

### Q2: 如何添加新的标签值？

**A**: Tag Browser 只显示**已存在**的标签值。要添加新值：
1. 在 MusicBee 中手动为某首歌添加新的标签值
2. 关闭并重新打开 Tag Browser
3. 新值会出现在列表中

### Q3: 窗口没有自动更新选曲？

**A**: 检查以下几点：
- 确保窗口没有被关闭
- 在 MusicBee 中确实选择了不同的歌曲
- 如果问题持续，关闭并重新打开 Tag Browser

### Q4: 双击没有反应？

**A**: 确保：
- 在 MusicBee 中已选择至少一首歌曲
- 双击的是列表中的标签值，不是空白区域
- 查看顶部是否显示绿色成功提示

### Q5: 如何恢复默认设置？

**A**: 删除设置文件：
```
<MusicBee数据目录>\QuickTagBrowser_Fields.txt
```
下次打开配置窗口会使用默认字段（Grouping, Genre, Mood）。

---

## 🔄 更新日志

### v1.4 (2025-11-19)
- ✅ 移除确认对话框，双击直接应用标签
- ✅ 窗口保持打开，支持实时选曲跟踪
- ✅ 应用标签后显示绿色成功提示
- ✅ 使用 SplitContainer 改进列布局

### v1.3 (2025-11-19)
- ✅ 改为列式并排显示所有字段
- ✅ 使用 TableLayoutPanel 实现多列布局
- ✅ 添加版本号显示

### v1.2 (2025-11-18)
- ✅ 添加设置界面，支持字段选择
- ✅ 扫描音乐库，显示实际包含数据的字段
- ✅ 显示字段真实名称和数据统计
- ✅ 设置持久化保存

### v1.1 (2025-11-18)
- ✅ 实现标签浏览器界面
- ✅ 支持多值标签处理
- ✅ 显示选中歌曲信息

### v1.0 (2025-11-18)
- ✅ 初始版本
- ✅ 基本标签选择功能

---

## 📞 支持与反馈

如有问题或建议：
- 使用 `build.bat` 编译插件
- 查看源代码了解更多技术细节

---

## 📄 许可证

本插件基于 MusicBee Plugin API 开发，仅供个人学习和使用。

---

## 🙏 致谢

感谢 MusicBee 提供强大的插件 API，让音乐管理更加高效！

---

**祝您使用愉快！🎵**
